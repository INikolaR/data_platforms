# Инструкция + скрипты

В пользователе, в котором установлен hadoop, клонируем репозиторий, чтобы получить все файлы, нужные для работы скриптов, и переходим в директорию с ДЗ 2:

```
git clone https://github.com/INikolaR/data_platforms.git
cd ./data_platforms/HW2
```

Запускаем скрипт script.sh. Использование:

```
sh script.sh [path/to/hadoop] [jump-node-hostname] [name-node-hostname] [data-node-hostname1] [data-node-hostname2]
```

то есть в аргументы скрипта передаётся путь до директории с hadoop (на семинаре было ~/hadoop-3.4.0), а также имена хостов всех нод. Скрипт будет работать в любой аналогичной, но не идентичной среде, которая была настроена по инструкции в ДЗ1. Этот скрипт создаст конфиги и раскидает их по нодам.

В пользователе, включенном в sudoers (например, team), клонируем репозиторий, чтобы получить все файлы, нужные для работы скриптов, и переходим в директорию с ДЗ 2:

```
git clone https://github.com/INikolaR/data_platforms.git
cd ./data_platforms/HW2
```

Выполняем скрипт nginx-script.sh. Использование:

```
sudo sh nginx-script.sh [name-node-hostname] [nn-interface-port] [yarn-port] [history-port]
```

в параметры скрипта передаём имя хоста нейм-ноды, а также порты интерфейса неймноды, yarn и historyservice (нужно написать дефолтные порты, если в системе специально не настроена иначе). Например: ``sudo sh nginx-script.sh nn 9870 8088 19888``

Заново подключаемся к jump-node командой:

```
ssh -L 9870:127.0.0.1:9870 -L 8088:127.0.0.1:8088 -L 19888:127.0.0.1:19888 team@ip
```

чтобы прокинуть порты. Теперь, например, интерфейс неймноды доступен на localhost:9870 рабочей машины.
